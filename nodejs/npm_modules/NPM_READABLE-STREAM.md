[Главная](../README.md#readme) > [Node.JS](../README_NODEJS.md#readme)

***

# [readable-stream](https://www.npmjs.com/package/readable-stream)

*Для створення об'єктних потоків для читання*

```javascript
const through2 = require('through2');
const Readable = require('readable-stream').Readable;

const stream = Readable({ objectMode: true }); /* 1 */
stream._read = () => {};                       /* 2 */

setInterval(() => {                            /* 3 */
  stream.push({
    x: Math.random()
  });
}, 100);

const getX = through2.obj((data, enc, cb) => { /* 4 */
  cb(null, `${data.x.toString()}\n`);
});

stream.pipe(getX).pipe(process.stdout);        /* 5 */
```

1. Для створення об'єкта для читання важливо встановити флаг `objectMode` в значення `true`. При цьому потік може передавати об'єкти через конвейєр. В зворотньому випадку передбачається використовування буферів або рядків.
2. Кожному потоку потрібна функція `_read`. Ця функція викликається, коли потік перевіряє дані. Це вірне місце, щоб запустити інші механізми і вставити оновлений вміст до потоку. Оскільки ми вставляємо дані ззовні, нам не потрібна ця функція, і ми можемо залишити її порожньою. Але потоки на читання **повинні** її реалізовувати, інакше ми отримаємо помилку.
3. Тут ми заповнюємо потік демонстраційними данимі. Кожні 100 мілісекунд мі вставляємо до нашого потоку об'єкт із випадковим числом.
4. Так як ми хочемо передати результати об'єктного потоку в `process.stdout`, а `process.stdout` приймає лише рядки, ми маємо невеличкий **трансформатор**, де ми витягуємо властивість з переданого JavaScript об'єкту.
5. Мі створюємо контейнер. Наш об'єктний потік для читання передає свої дані до трансформатора `getX` і, нарешті, в `process.stdout`, що записує